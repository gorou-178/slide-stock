# API callベストプラクティス化

フロントエンドからの API 呼び出しをベストプラクティスに沿って改善してください。

## 前提

- 現在の src/pages/stocks.astro 等で直接 fetch を呼んでいる箇所を改善する

## やること

1. 現在のフロントエンドコード（src/pages/）を確認し、API 呼び出し箇所を特定する

2. API クライアントユーティリティを作成する（`src/lib/api.ts`）:
   - 共通のベースURL設定
   - 認証ヘッダー/Cookie の自動付与
   - エラーハンドリングの統一（401 → ログインリダイレクト、5xx → エラー表示）
   - レスポンスの型安全な変換

3. 各ページの API 呼び出しを api.ts 経由に置き換える

4. エラー時のユーザー向け表示:
   - ネットワークエラー
   - 認証エラー（→ ログイン画面へリダイレクト）
   - サーバーエラー

5. `npm test` と `npm run build` がパスすることを確認する
