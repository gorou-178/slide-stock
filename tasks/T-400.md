# 本番運用設計（環境分離・Secrets・deploy）

本番運用に必要な設計を docs/production-plan.md に記述してください。

## やること

1. CLAUDE.md と docs/architecture.md を確認する

2. docs/production-plan.md を作成し、以下を記述する:

### 環境分離
- ローカル開発 / ステージング / 本番 の環境一覧
- 各環境の Cloudflare リソース名（D1 DB名、Workers名、Pages プロジェクト名）
- wrangler.toml の環境設定（[env.production] 等）

### Secrets 管理
- 必要な Secrets 一覧:
  - GOOGLE_CLIENT_ID / GOOGLE_CLIENT_SECRET（OIDC用）
  - SESSION_SECRET（セッション署名用）
  - その他必要なもの
- Secrets の設定方法（`wrangler secret put` / GitHub Actions secrets）
- .dev.vars と本番 Secrets の対応表

### デプロイ手順
- Cloudflare Pages（フロントエンド）のデプロイ手順
- Cloudflare Workers（API）のデプロイ手順
- D1 マイグレーションの実行手順
- デプロイ順序（DB → Workers → Pages）

### ドメイン
- slide-stock.gorou.dev の設定方法
- Cloudflare DNS / Pages カスタムドメイン設定

3. 不明点があれば Blocked タスクとして tasks/TASKS.md に追加する
