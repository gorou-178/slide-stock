# Google OIDCログインエンドポイント実装

POST /api/auth/callback エンドポイントを実装してください。

## 前提

- docs/auth-spec.md（T-500 で作成）の仕様に従う
- docs/architecture.md の認証フローを参照する
- worker/index.ts に既存の API ルーティングがある
- migrations/0001_init.sql の users テーブルを使用する

## やること

1. docs/auth-spec.md を読み、認証フローの仕様を把握する

2. POST /api/auth/callback を実装する:
   - フロントエンドから受け取った ID Token（または Authorization Code）を検証する
   - Google の JWKS エンドポイントで JWT 署名を検証する
   - ペイロードから sub, email, name を取得する
   - D1 の users テーブルに upsert する（google_sub で一意）
   - セッション Cookie を発行する（docs/auth-spec.md の Cookie 属性に従う）

3. `npm test` で全テストがパスすることを確認する

4. 変更をコミットする
