# Google OIDC認証仕様策定

Google OIDC を使ったログイン・セッション管理の仕様を策定してください。

## 前提

- CLAUDE.md の認証要件（Google Login / OIDC）を参照する
- docs/architecture.md の認証フローを参照する
- 現在は worker/middleware/test-auth-bypass.ts によるテスト用認証のみ実装済み

## やること

1. CLAUDE.md と docs/architecture.md を読み、認証要件を把握する

2. docs/auth-spec.md を作成し、以下を定義する:
   - Google OIDC フロー（Authorization Code Flow / Implicit Flow の選択と理由）
   - コールバック URL（/api/auth/callback）
   - ID Token の検証方法（Google JWKS エンドポイント）
   - セッション形式（署名付き Cookie / D1 セッションテーブル の選択と理由）
   - セッション Cookie の属性（HttpOnly, Secure, SameSite, Path, Max-Age）
   - セッション有効期限（例: 7日間）
   - ログアウトフロー（Cookie クリア）
   - 必要な環境変数（GOOGLE_CLIENT_ID, SESSION_SECRET 等）

3. QA/DEV タスク（T-501〜T-506）が実行可能になるよう、仕様を具体的に記述する

4. 必要に応じて tasks/TASKS.md に補足タスクを追加する
